webpackJsonp([0],{VZhX:function(t,e,n){"use strict";function i(t){n("Y23Q")}Object.defineProperty(e,"__esModule",{value:!0});var a={name:"Foto",data:function(){return{video:null,canvas:{},captures:[],picture:null}},methods:{snapshotResize:function(t,e,n){var i,a,s,o=this.$refs.canvas,r=o.getContext("2d"),c=0,u=0;return o.width=e,o.height=n,i=t.videoHeight/t.videoWidth,t.videoHeight<t.videoWidth?(i=t.videoWidth/t.videoHeight,s=n,a=i*n,c=-(a-e)/2):(a=e,s=i*e,u=-(s-n)/2),r.drawImage(t,c,u,a,s),o.toDataURL("image/png",.75)},capture:function(){this.canvas=this.$refs.canvas,this.picture=this.snapshotResize(this.video,240,240),this.stop()},start:function(){var t=this;this.picture=null,this.video=document.getElementById("video"),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then(function(e){t.video.srcObject=e})},stop:function(){this.video.srcObject.getTracks().forEach(function(t){return t.stop()}),this.video.srcObject=null},save:function(){var t=this;this.$http.patch("/api/v1/grupos/foto/",{foto:this.picture}).then(function(e){e.data.result&&t.$router.push("/espera")})}},mounted:function(){this.start()}},s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"centered center"},[t.$global.colaboracao?t._e():n("h5",[t._v("Escolha uma imagem para vocÃª")]),t._v(" "),t.$global.colaboracao?n("h5",[t._v("Escolha uma imagem para o seu grupo")]):t._e(),t._v(" "),t.picture?t._e():n("div",{staticClass:"capture"},[n("div",{staticClass:"video-wrapper"},[n("video",{ref:"video",attrs:{id:"video",autoplay:""}})]),t._v(" "),n("div",{staticClass:"center"},[n("button",{staticClass:"btn",attrs:{type:"button",id:"snap"},on:{click:function(e){t.capture()}}},[n("i",{staticClass:"material-icons"},[t._v("camera_alt")])])])]),t._v(" "),n("canvas",{ref:"canvas",attrs:{id:"canvas",width:"240",height:"240"}}),t._v(" "),t.picture?n("div",[n("img",{ref:"picture",staticClass:"circle",attrs:{src:t.picture}}),n("br"),n("br"),t._v(" "),n("button",{staticClass:"btn",attrs:{type:"button"},on:{click:t.save}},[t._v("Salvar")]),t._v(" "),n("br"),n("br"),t._v(" "),n("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(e){t.$router.go()}}},[t._v("Outra foto")])]):t._e()])},o=[],r={render:s,staticRenderFns:o},c=r,u=n("VU/8"),d=i,v=u(a,c,!1,d,null,null);e.default=v.exports},Y23Q:function(t,e,n){var i=n("f/Vs");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("1bff9b18",i,!0,{})},"f/Vs":function(t,e,n){e=t.exports=n("FZ+f")(!0),e.push([t.i,"\n#video {\n  background-color: #000000;\n  width: 100%;\n}\n#canvas {\n    display: none;\n}\nli {\n    display: inline;\n    padding: 5px;\n}\n.circle {\n  border-radius: 50%;\n}\n\n\n","",{version:3,sources:["/Users/alexandre/dev/sigecc/src/mobile/components/Foto.vue"],names:[],mappings:";AACA;EACE,0BAA0B;EAC1B,YAAY;CACb;AACD;IACI,cAAc;CACjB;AACD;IACI,gBAAgB;IAChB,aAAa;CAChB;AACD;EACE,mBAAmB;CACpB",file:"Foto.vue",sourcesContent:["\n#video {\n  background-color: #000000;\n  width: 100%;\n}\n#canvas {\n    display: none;\n}\nli {\n    display: inline;\n    padding: 5px;\n}\n.circle {\n  border-radius: 50%;\n}\n\n\n"],sourceRoot:""}])}});
//# sourceMappingURL=0.8e454c968f7ac10045b8.js.map